# Orchestrates all CI workflows - runs on PRs, pushes to main, and manual dispatch
# Individual test workflows are called as reusable workflows
name: CI All

on:
  push:
    branches:
      - main
  pull_request:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  ci:
    uses: ./.github/workflows/ci.yml

  test-base-action:
    uses: ./.github/workflows/test-base-action.yml
    secrets: inherit # Required for ANTHROPIC_API_KEY

  test-custom-executables:
    uses: ./.github/workflows/test-custom-executables.yml
    secrets: inherit

  test-mcp-servers:
    uses: ./.github/workflows/test-mcp-servers.yml
    secrets: inherit

  test-settings:
    uses: ./.github/workflows/test-settings.yml
    secrets: inherit

  test-structured-output:
    uses: ./.github/workflows/test-structured-output.yml
    secrets: inherit
